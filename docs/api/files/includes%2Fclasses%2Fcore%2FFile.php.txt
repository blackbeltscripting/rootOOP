<?php
/**
 * Arty // Web Design and Programming
 *	
 * @author Eric Ghiraldello <ericg@arty-web-design.com>
 * @version 0.2.0
 *
 */
 
namespace rootOOP\Core;
/**
 * The File Class
 *
 * Controls all files and filesystems
 * @deprecated 1.0.0 No longer used by internal code and not recommended.
 */
class File {
	/*
	 *	@return boolean Check if file exists.
	 */
	public function exists($filename) {
		return(is_readable($filename) && !empty($filename));
	}
	//	Require the file
	public function load($filename) {
		if($this->exists($filename)) {
			require_once($filename);
			return true;
		}
	}
	public function load_class($file) {
		//	If filename exists
		if($this->load($file['dirname'] . DIRECTORY_SEPARATOR . $file['basename'])) {
			//	If this variable is not taken (to avoid duplication).
			if(!isset($$file['filename'])) {
				//	Set variable to Global scope
				global $$file['filename'];
				//	Create class with classname
				$$file['filename'] = new $file['filename']();
			}
		}
	}
	function __construct() {
		$this->load_dir();
	}
	public function load_dir($file_directory = CLASSES) {
		//	Check to see if request is for one file or multiple
		$file = pathinfo($file_directory);
		if(isset($file['extension']) && $file['extension'] == "php") {
			$this->load_class($file);
		} else {
			/*	Loads All Classes from the includes/classes folder	*/
			$files = $this->get_dir($file_directory);

			//	Determine if php files are in folder
			if(is_array($files)) {
				foreach($files as $file_abspath) {
					if(is_file($file_abspath)) {
						$file = pathinfo($file_abspath);
						if(isset($file['extension']) && $file['extension'] == "php") {
							$this->load_class($file);
						}
					}
				}
			}
		}
	}
	public function get_dir($file_directory = CORE) {
		//	Returns all files in directory
		return glob( $file_directory . "*" );
	}
}
$File = new File();

